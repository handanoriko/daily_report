# 2023/11/26
# 取り組んだ課題
達人に学ぶDB設計
  
# 次やる課題
達人に学ぶDB設計

# 学んだこと
## データベースとパフォーマンス
* データベースのパフォーマンスを決める主な要因はディスクI/Oの分散（RAID）、SQLにおける結合（正規化）、そしてインデックスと統計情報。
* インデックスの種類の中からB-treeインデックスを覚えておくことで多くのケースに対応できる。
* インデックスはパフォーマンス向上に有効な道具だが、正しい使い方をしなければ効果を発揮しない。
* 統計情報はDBMSにとっての地図情報。これが最新でないと、DBMSは最短のアクセスパスを選べない。
* DBMSも人間の作った物なので最新の地図を見ても道を間違えることもある。

### インデックス設計
#### 利点
1. アプリケーションのコードに影響を与えない。（アプリケーション透過的）
1. テーブルのデータに影響を与えない。（データ透過的）
1. 性能改善の効果が大きい。
#### B-treeインデックスの構造
1. 均一性
平衡木のためどんなキーの値を使っても常にリーフまでの距離が一定のため、探索を同じ計算量で行える。
1. 持続性
テーブルのデータ量が増えても検索や更新にかかる時間はほぼ増えず、緩やかにしか性能が劣化しない。
1. 処理汎用性
挿入、更新、削除の処理も同じくらいの探索速度となり、かつデータ量が増えても性能劣化の度合いが緩やか。
1. 非等値性
構築される時必ずキー値をソートするため、範囲検索の条件に対しても、高速化を可能にする。
1. 親ソート性
集約関数、ORDER BY句、集合演算、OLAP関数を記述したときは暗黙にDBMS内部でソートが行われる。
### 設計方針
1. 大規模なテーブルに作成
データが少ない（1万件以下）の場合はほぼインデックスの効果がない。
1. カーディナリティの高い列に作成
`カーディナリティ` 特定の列の値が、どのぐらいの種類の多さを持つかということを表す概念。
1. SQL文でWHERE区の選択条件、または結合条件に使用されている列に作成
明示的に条件を使用する値のデータ型を列のデータ型に合わせる必要がある。
### 統計情報
収集のタイミングはデータが大きく更新された後、なるべく早く、原則夜間帯に実施。

# 学習時間
2h（合計366h）
